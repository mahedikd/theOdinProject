(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,(r=[{key:"addElementToUi",value:function(e,t){var n=e.id,r=e.bookTitle,o=e.author,a=e.lang,c=e.totalPage,i=e.publishedDate,l=e.addedHere,d="",u="";e.checked?(d="checked",u="id='fin'"):(d="",u="");var s='\n      <div data-id="'.concat(n,'" class="book" ').concat(u,'>\n        <table class="u-full-width">\n          <fieldset>\n            <legend>').concat(r,'</legend>\n            <tbody>\n              <tr>\n                <td class="tdata">Author</td>\n                <td>').concat(o,'</td>\n              </tr>\n              <tr>\n                <td class="tdata">Language</td>\n                <td>').concat(a,'</td>\n              </tr>\n              <tr>\n                <td class="tdata">Total Page</td>\n                <td>').concat(c,'</td>\n              </tr>\n              <tr>\n                <td class="tdata">Published</td>\n                <td>').concat(i,'</td>\n              </tr>\n              <tr>\n                <td class="tdata">Added Here</td>\n                <td>').concat(l,'</td>\n              </tr>\n            </tbody>\n          </fieldset>\n        </table>\n        <i class="remove fa fa-trash-o" aria-hidden="true"></i>\n        <label class="switch">\n          <input id="isFinished" type="checkbox" ').concat(d,'/>\n          <span id="mark" class="slider round"></span>\n          <p id="mark-text">Mark as Read</p>\n        </label>\n      </div>\n    ');t.innerHTML+=s}},{key:"showAlert",value:function(e,t,n){var r=document.createElement("p");r.className="alert",r.innerText=n,r.style.cssText="background: red; color: white; padding: 1rem; border-radius: 4px;text-align: center; font-weight: 600",e.insertBefore(r,t),setTimeout((function(){document.querySelector(".alert").remove()}),3e3)}},{key:"clearElem",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}])&&e(n.prototype,r),o&&e(n,o),t}());function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"storeItem",value:function(e){var t=[];(t=null===localStorage.getItem("bookList")?[]:JSON.parse(localStorage.getItem("bookList"))).push(e),localStorage.setItem("bookList",JSON.stringify(t))}},{key:"removeItem",value:function(e){var t=[];(t=null===localStorage.getItem("bookList")?[]:JSON.parse(localStorage.getItem("bookList"))).forEach((function(n,r){n.id==e&&t.splice(r,1)})),localStorage.setItem("bookList",JSON.stringify(t))}},{key:"clearItems",value:function(){localStorage.clear()}},{key:"getItemToUpdateUi",value:function(){return null===localStorage.getItem("bookList")?[]:JSON.parse(localStorage.getItem("bookList"))}},{key:"updateLocalState",value:function(e,t){var n=[];(n=null===localStorage.getItem("bookList")?[]:JSON.parse(localStorage.getItem("bookList"))).forEach((function(n){n.id===e&&(n.checked=t)})),localStorage.setItem("bookList",JSON.stringify(n))}}])&&n(t.prototype,r),o&&n(t,o),e}());function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=document.querySelector(".total-book"),i=document.querySelector(".finished"),l=document.querySelector(".not-finished"),d=document.querySelector("#author"),u=document.querySelector("#title"),s=document.querySelector("#language"),f=document.querySelector("#total-page"),m=document.querySelector("#published"),g=document.querySelector(".modal"),h=document.querySelector("#add-book"),v=document.querySelector("#clear-book"),b=document.querySelector("#remove-form"),y=document.querySelector("#isRead");h.onclick=function(){g.style.display="block"},b.onclick=function(){g.style.display="none"},window.onclick=function(e){e.target===g&&(g.style.display="none")},v.onclick=function(){!function(){if("0"!==c.innerText){var e=document.querySelector(".container");t.clearElem(p),t.showAlert(e,p,"BookList Cleard"),r.clearItems(),S()}}()};var p=document.querySelector(".library-grid"),k=r.getItemToUpdateUi()[0]?r.getItemToUpdateUi():[{id:1,bookTitle:"demos",author:"demos don't count in log",lang:"en",totalPage:"660",publishedDate:"No Date Added",addedHere:"21 Mar 2021",checked:!0},{id:2,bookTitle:"demo title",author:"after adding data reload to remove demo",lang:"en",totalPage:"1",publishedDate:"03 Mar 2021",addedHere:"21 Mar 2021",checked:!1}];function S(){var e=(k=r.getItemToUpdateUi()).length,t=k.filter((function(e){return e.checked})).length,n=e-t;c.innerText=e,i.innerText=t,l.innerText=n}document.addEventListener("DOMContentLoaded",(function(){k.forEach((function(e){return t.addElementToUi(e,p)})),S()})),p.addEventListener("click",(function(e){if(e.target.classList.contains("remove")){e.target.parentElement.remove();var t=e.target.parentElement.dataset.id;k.forEach((function(e,n){e.id===t&&(k.splice(n,1),r.removeItem(e.id))}))}S()})),p.addEventListener("click",(function(e){if("isFinished"===e.target.id){if(e.target.attributes.checked){e.target.removeAttribute("checked"),e.target.parentElement.parentElement.id="notfin";var t=e.target.parentElement.parentElement.dataset.id;k.forEach((function(e){e.id==t&&(e.checked=!1,r.updateLocalState(e.id,!1))}))}else{e.target.setAttribute("checked",""),e.target.parentElement.parentElement.setAttribute("id","fin");var n=e.target.parentElement.parentElement.dataset.id;k.forEach((function(e){e.id==n&&(e.checked=!0,r.updateLocalState(e.id,!0))}))}S()}})),document.querySelector("#bookForm").addEventListener("submit",(function(e){e.preventDefault();var n=u.value,a=d.value,c=s.value,i=f.value,l=m.value,g=y.checked,h="",v=function(){var e=0;e=0===k.length?1:k.pop().id+1;return e}();if(l){var b=o(new Date(l).toDateString().substr(4).split(" "),3),E=b[0],T=b[1],I=b[2];h="".concat(T," ").concat(E," ").concat(I)}else h="No Date Added";var w=o((new Date).toDateString().substr(4).split(" "),3),L=w[0],q=w[1],A=w[2],D="".concat(q," ").concat(L," ").concat(A),O=function(e,t,n,r,o,a,c,i){return{id:e,bookTitle:t,author:n,lang:r,totalPage:o,publishedDate:a,addedHere:c,checked:i}}(v,n,a,c,i,h,D,g);if(N=O,k.some((function(e){return e.bookTitle===N.bookTitle&&e.author===N.author&&e.lang===N.lang}))){var x=document.querySelector(".button-primary"),U=document.querySelector("#bookForm");return void t.showAlert(U,x,"Data Already Exist")}var N;k.push(O),t.addElementToUi(O,p),r.storeItem(O),u.value="",d.value="",s.value="",f.value="",m.value="",y.checked="",S()}))})();